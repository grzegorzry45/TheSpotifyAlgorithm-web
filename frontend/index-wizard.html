<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hit Algorithm - Prepare Your Hit Song</title>
    <link rel="stylesheet" href="/static/css/style.css?v=1765291200">
    <link rel="stylesheet" href="/static/css/wizard.css?v=1">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1 class="main-title">THE HIT ALGORITHM</h1>
            <p class="subtitle">COMPARE YOUR SONGS WITH TRENDING HITS</p>
            <p id="logged-in-status" style="color: #1DB954; font-size: 14px; margin-top: 5px; display: none;">You're logged in as <span id="user-email-display"></span></p>
            <br> 
            <p class="status" style="margin-top: 5px;">Public Beta v.0.47.8 - Created by GRyba</p>
        </div>
        <div id="credits-display" style="position: absolute; top: 20px; right: 20px; display: none; z-index: 1000; background: rgba(18, 18, 18, 0.35); backdrop-filter: blur(40px) saturate(180%); -webkit-backdrop-filter: blur(40px) saturate(180%); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; padding: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset, 0 20px 60px rgba(0, 0, 0, 0.4); min-width: 200px;">
            <div style="text-align: center;">
                <div style="font-size: 11px; color: #888; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 8px;">Credits</div>
                <div style="font-size: 28px; font-weight: bold; color: #1DB954; margin-bottom: 15px; line-height: 1;">
                    <span id="credits-amount">1000</span> üíé
                </div>
                <p id="logged-in-status" style="color: #1DB954; font-size: 14px; margin-top: 5px; display: none;">You're logged in as <span id="user-email-display"></span></p>
                <button id="add-credits-btn" class="btn btn-primary" style="font-size: 12px; padding: 10px 15px; width: 100%; margin-bottom: 8px; border-radius: 3px; font-weight: 600; letter-spacing: 0.5px;">+ ADD CREDITS</button>
                <button id="logout-btn-header" class="btn btn-secondary" style="font-size: 12px; padding: 10px 15px; width: 100%; cursor: pointer; border-radius: 3px; font-weight: 600; letter-spacing: 0.5px;">LOGOUT</button>
            </div>
        </div>
    </header>

    <!-- Landing Hero (Visible when logged out) -->
    <div id="landing-hero" class="landing-hero" style="text-align: center; padding: 50px 20px;">
        <div class="hero-actions" style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
            <button id="hero-login-btn" class="btn btn-primary" style="padding: 15px 40px; font-size: 18px;">Login</button>
            <button id="hero-register-btn" class="btn btn-secondary" style="padding: 15px 40px; font-size: 18px;">Register</button>
        </div>
    </div>

    <div id="main-app-content" style="display: none;">
    <!-- Progress Indicator -->
    <div class="wizard-progress">
        <div class="progress-step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">Choose Reference</div>
        </div>
        <div class="progress-connector"></div>
        <div class="progress-step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">Upload Your Track</div>
        </div>
        <div class="progress-connector"></div>
        <div class="progress-step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label">Get Results</div>
        </div>
    </div>

    <!-- Main Wizard Container -->
    <div class="wizard-container">

        <!-- STEP 1: CHOOSE REFERENCE -->
        <div class="wizard-step active" id="step-1">
            <div class="step-header">
                <h2>STEP 1: Choose Your Reference</h2>
                <p class="step-description">How do you want to define the target sound you're comparing against?</p>
            </div>

            <div class="reference-options">
                <!-- Option 1: Create Playlist -->
                <div class="reference-card" data-reference="playlist">
                    <div class="card-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="waveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1DB954;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#1ed760;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <!-- Soundwave bars -->
                            <rect x="8" y="28" width="3" height="8" rx="1.5" fill="url(#waveGradient)" opacity="0.6">
                                <animate attributeName="height" values="8;20;8" dur="1.2s" repeatCount="indefinite" />
                                <animate attributeName="y" values="28;22;28" dur="1.2s" repeatCount="indefinite" />
                            </rect>
                            <rect x="14" y="20" width="3" height="24" rx="1.5" fill="url(#waveGradient)" opacity="0.7">
                                <animate attributeName="height" values="24;32;24" dur="1s" repeatCount="indefinite" />
                                <animate attributeName="y" values="20;16;20" dur="1s" repeatCount="indefinite" />
                            </rect>
                            <rect x="20" y="16" width="3" height="32" rx="1.5" fill="url(#waveGradient)" opacity="0.85">
                                <animate attributeName="height" values="32;40;32" dur="0.9s" repeatCount="indefinite" />
                                <animate attributeName="y" values="16;12;16" dur="0.9s" repeatCount="indefinite" />
                            </rect>
                            <rect x="26" y="22" width="3" height="20" rx="1.5" fill="url(#waveGradient)">
                                <animate attributeName="height" values="20;36;20" dur="1.1s" repeatCount="indefinite" />
                                <animate attributeName="y" values="22;14;22" dur="1.1s" repeatCount="indefinite" />
                            </rect>
                            <rect x="32" y="12" width="3" height="40" rx="1.5" fill="url(#waveGradient)">
                                <animate attributeName="height" values="40;48;40" dur="0.95s" repeatCount="indefinite" />
                                <animate attributeName="y" values="12;8;12" dur="0.95s" repeatCount="indefinite" />
                            </rect>
                            <rect x="38" y="18" width="3" height="28" rx="1.5" fill="url(#waveGradient)">
                                <animate attributeName="height" values="28;38;28" dur="1.05s" repeatCount="indefinite" />
                                <animate attributeName="y" values="18;13;18" dur="1.05s" repeatCount="indefinite" />
                            </rect>
                            <rect x="44" y="24" width="3" height="16" rx="1.5" fill="url(#waveGradient)" opacity="0.85">
                                <animate attributeName="height" values="16;28;16" dur="1.15s" repeatCount="indefinite" />
                                <animate attributeName="y" values="24;18;24" dur="1.15s" repeatCount="indefinite" />
                            </rect>
                            <rect x="50" y="26" width="3" height="12" rx="1.5" fill="url(#waveGradient)" opacity="0.7">
                                <animate attributeName="height" values="12;22;12" dur="0.98s" repeatCount="indefinite" />
                                <animate attributeName="y" values="26;21;26" dur="0.98s" repeatCount="indefinite" />
                            </rect>
                            <rect x="56" y="30" width="3" height="4" rx="1.5" fill="url(#waveGradient)" opacity="0.6">
                                <animate attributeName="height" values="4;14;4" dur="1.25s" repeatCount="indefinite" />
                                <animate attributeName="y" values="30;25;30" dur="1.25s" repeatCount="indefinite" />
                            </rect>
                        </svg>
                    </div>
                    <h3>Create Playlist Profile</h3>
                    <p>Analyze 2-30 tracks to create a sonic profile based on multiple songs</p>
                    <div class="card-benefits">
                        <span class="benefit">‚úì Most accurate</span>
                        <span class="benefit">‚úì Captures playlist vibe</span>
                    </div>
                    <button class="btn btn-primary select-reference-btn">Select This Option</button>
                </div>

                <!-- Option 2: Load Preset -->
                <div class="reference-card" data-reference="preset">
                    <div class="card-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="loadGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1DB954;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#1ed760;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <!-- Database/Stack layers -->
                            <ellipse cx="32" cy="18" rx="20" ry="6" stroke="url(#loadGradient)" stroke-width="2.5" fill="none" opacity="0.4">
                                <animate attributeName="opacity" values="0.4;0.7;0.4" dur="2s" repeatCount="indefinite" />
                            </ellipse>
                            <ellipse cx="32" cy="28" rx="20" ry="6" stroke="url(#loadGradient)" stroke-width="2.5" fill="none" opacity="0.6">
                                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2s" begin="0.3s" repeatCount="indefinite" />
                            </ellipse>
                            <ellipse cx="32" cy="38" rx="20" ry="6" stroke="url(#loadGradient)" stroke-width="3" fill="none">
                                <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.6s" repeatCount="indefinite" />
                            </ellipse>
                            <!-- Connecting lines -->
                            <line x1="12" y1="18" x2="12" y2="38" stroke="url(#loadGradient)" stroke-width="2" opacity="0.6" />
                            <line x1="52" y1="18" x2="52" y2="38" stroke="url(#loadGradient)" stroke-width="2" opacity="0.6" />
                            <!-- Checkmark in circle -->
                            <circle cx="32" cy="50" r="8" fill="url(#loadGradient)" opacity="0.15">
                                <animate attributeName="r" values="8;9;8" dur="1.5s" repeatCount="indefinite" />
                            </circle>
                            <path d="M28 50 L30.5 52.5 L36 47" stroke="url(#loadGradient)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none">
                                <animate attributeName="stroke-dasharray" values="0,20;20,0" dur="1.5s" repeatCount="indefinite" />
                                <animate attributeName="stroke-dashoffset" values="20;0" dur="1.5s" repeatCount="indefinite" />
                            </path>
                        </svg>
                    </div>
                    <h3>Load Playlist Profile</h3>
                    <p>Use a previously analyzed playlist or our profiles based on Spotify!</p>
                    <div class="card-benefits">
                        <span class="benefit">‚úì Instant</span>
                        <span class="benefit">‚úì No re-analysis needed</span>
                    </div>
                    <button class="btn btn-primary select-reference-btn">Select This Option</button>
                </div>

                <!-- Option 3: Single Track -->
                <div class="reference-card" data-reference="single">
                    <div class="card-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="targetGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1DB954;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#1ed760;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <!-- Outer circle -->
                            <circle cx="32" cy="32" r="24" stroke="url(#targetGradient)" stroke-width="2" fill="none" opacity="0.3">
                                <animate attributeName="r" values="24;26;24" dur="2s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="0.3;0.6;0.3" dur="2s" repeatCount="indefinite" />
                            </circle>
                            <!-- Middle circle -->
                            <circle cx="32" cy="32" r="16" stroke="url(#targetGradient)" stroke-width="2.5" fill="none" opacity="0.5">
                                <animate attributeName="r" values="16;17.5;16" dur="2s" begin="0.3s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="0.5;0.8;0.5" dur="2s" begin="0.3s" repeatCount="indefinite" />
                            </circle>
                            <!-- Inner circle -->
                            <circle cx="32" cy="32" r="8" stroke="url(#targetGradient)" stroke-width="3" fill="none">
                                <animate attributeName="r" values="8;9;8" dur="2s" begin="0.6s" repeatCount="indefinite" />
                                <animate attributeName="opacity" values="0.7;1;0.7" dur="2s" begin="0.6s" repeatCount="indefinite" />
                            </circle>
                            <!-- Center dot -->
                            <circle cx="32" cy="32" r="3" fill="url(#targetGradient)">
                                <animate attributeName="r" values="3;4;3" dur="1.5s" repeatCount="indefinite" />
                            </circle>
                            <!-- Crosshair lines -->
                            <line x1="32" y1="8" x2="32" y2="22" stroke="url(#targetGradient)" stroke-width="2" opacity="0.7" stroke-linecap="round">
                                <animate attributeName="opacity" values="0.7;1;0.7" dur="1.8s" repeatCount="indefinite" />
                            </line>
                            <line x1="32" y1="42" x2="32" y2="56" stroke="url(#targetGradient)" stroke-width="2" opacity="0.7" stroke-linecap="round">
                                <animate attributeName="opacity" values="0.7;1;0.7" dur="1.8s" begin="0.2s" repeatCount="indefinite" />
                            </line>
                            <line x1="8" y1="32" x2="22" y2="32" stroke="url(#targetGradient)" stroke-width="2" opacity="0.7" stroke-linecap="round">
                                <animate attributeName="opacity" values="0.7;1;0.7" dur="1.8s" begin="0.4s" repeatCount="indefinite" />
                            </line>
                            <line x1="42" y1="32" x2="56" y2="32" stroke="url(#targetGradient)" stroke-width="2" opacity="0.7" stroke-linecap="round">
                                <animate attributeName="opacity" values="0.7;1;0.7" dur="1.8s" begin="0.6s" repeatCount="indefinite" />
                            </line>
                        </svg>
                    </div>
                    <h3>Single Reference Track</h3>
                    <p>Compare your track directly against one reference song of your choice</p>
                    <div class="card-benefits">
                        <span class="benefit">‚úì Fast & simple</span>
                        <span class="benefit">‚úì Direct comparison</span>
                    </div>
                    <button class="btn btn-primary select-reference-btn">Select This Option</button>
                </div>
            </div>

            <!-- Expandable sections for each option -->
            <div id="playlist-upload-section" class="reference-upload-section" style="display: none;">
                <h3><img src="/static/icons/library.svg" class="icon-svg small" alt=""> Upload Playlist Tracks (2-30 files)</h3>
                <div class="upload-zone" id="playlist-upload">
                    <div class="upload-icon"><img src="/static/icons/library.svg" class="icon-svg large" alt=""></div>
                    <h4>Drag & Drop Playlist Files</h4>
                    <p>or click to browse</p>
                    <p class="file-types">Supported: MP3, WAV, FLAC</p>
                    <input type="file" id="playlist-files" multiple accept=".mp3,.wav,.flac" style="display: none;">
                </div>
                <div id="playlist-file-list" class="file-list"></div>

                <!-- Parameter Selection for Playlist Analysis -->
                <div class="parameter-selection-wizard" style="margin-top: 30px;">
                    <h3>Select Analysis Parameters</h3>
                    <p class="param-hint">Choose which parameters to analyze. More parameters = longer analysis time (~5-80s per track).</p>

                    <div class="param-quick-select">
                        <button class="btn btn-secondary btn-small" id="select-essential-playlist">Essential Only (Fast)</button>
                        <button class="btn btn-secondary btn-small" id="select-all-params-playlist">All Parameters (Thorough)</button>
                        <button class="btn btn-secondary btn-small btn-show-params" id="open-params-playlist">
                            <span class="icon-gear">‚öôÔ∏è</span> Advanced Parameters
                        </button>
                    </div>

                    <div id="playlist-param-groups-container" style="display: none;">
                        <div class="param-groups" id="playlist-param-groups">
                            <!-- Parameters will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <button id="analyze-playlist-btn" class="btn btn-primary" style="width: 100%;" disabled>Analyze Playlist & Create Profile ‚Üí</button>
                <div id="playlist-progress" class="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="playlist-progress-fill"></div>
                    </div>
                    <p class="progress-text" id="playlist-progress-text">Processing...</p>
                    <p class="progress-detail" id="playlist-progress-detail" style="font-size: 0.9em; color: #888; margin-top: 5px;"></p>
                </div>

                <!-- Playlist Results -->
                <div id="playlist-results" class="results-summary" style="display: none; margin-top: 30px;">
                    <h3>‚úì Playlist Profile Created</h3>
                    <div id="playlist-profile-display" class="param-comparison-grid"></div>
                    <div style="margin-top: 25px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <button id="save-playlist-preset-btn" class="btn btn-primary"><img src="/static/icons/save.svg" class="icon-svg small" alt=""> Save as Preset</button>
                        <button id="export-preset-file-btn" class="btn btn-secondary"><img src="/static/icons/save.svg" class="icon-svg small" alt=""> Export to File</button>
                    </div>
                </div>
            </div>

            <div id="preset-load-section" class="reference-upload-section" style="display: none;">
                <h3><img src="/static/icons/library.svg" class="icon-svg medium" alt=""> Select a Saved Preset</h3>
                <div id="preset-list-display" class="preset-list">
                    <p class="placeholder">No presets saved yet</p>
                </div>
                <!-- Button moved inside preset list via JS -->
                <input type="file" id="import-preset-wizard-file" accept=".json" style="display: none;">
            </div>

            <div id="single-upload-section" class="reference-upload-section" style="display: none;">
                <h3><img src="/static/icons/library.svg" class="icon-svg small" alt=""> Upload Reference Track</h3>
                <div class="upload-zone small" id="reference-track-upload">
                    <div class="upload-icon"><img src="/static/icons/library.svg" class="icon-svg large" alt=""></div>
                    <p>Drop reference track here</p>
                    <input type="file" id="reference-track-file" accept=".mp3,.wav,.flac" style="display: none;">
                </div>
                <div id="reference-track-name" class="track-name-container"></div>
                <button id="confirm-reference-btn" class="btn btn-primary" style="width: 100%;" disabled>Confirm Reference & Upload Your Track ‚Üí</button>
            </div>
        </div>

        <!-- STEP 2: UPLOAD YOUR TRACK -->
        <div class="wizard-step" id="step-2" style="display: none;">
            <div class="step-header">
                <h2>STEP 2: Upload Your Track</h2>
                <p class="step-description">Now upload the track you want to analyze and compare</p>
            </div>

            <div class="upload-zone large" id="user-track-upload">
                <div class="upload-icon"><img src="/static/icons/library.svg" class="icon-svg large" alt=""></div>
                <h3>Drag & Drop Your Track Here</h3>
                <p>or click to browse</p>
                <p class="file-types">Supported: MP3, WAV, FLAC</p>
                <input type="file" id="user-track-file" accept=".mp3,.wav,.flac" style="display: none;">
            </div>

            <div id="user-track-name" class="track-name-container"></div>

            <!-- Parameter Selection -->
            <div class="parameter-selection-wizard">
                <h3>Select Parameters to Analyze</h3>
                <p class="param-hint">Choose which audio parameters to compare. More parameters = longer analysis time.</p>

                <div class="param-quick-select">
                    <button class="btn btn-secondary btn-small" id="select-essential">Essential Only (Fast)</button>
                    <button class="btn btn-secondary btn-small" id="select-all-params">All Parameters (Thorough)</button>
                    <button class="btn btn-secondary btn-small btn-show-params" id="open-params-user">
                        <span class="icon-gear">‚öôÔ∏è</span> Advanced Parameters
                    </button>
                </div>

                <div id="wizard-param-groups-container" style="display: none;">
                    <div class="param-groups" id="wizard-param-groups">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="wizard-navigation">
                <button class="btn btn-secondary" id="back-to-step-1">‚Üê Back</button>
                <button class="btn btn-primary" id="compare-now-btn" disabled>Compare Now ‚Üí</button>
            </div>

            <div id="comparison-progress" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="comparison-progress-fill"></div>
                </div>
                <p class="progress-text" id="comparison-progress-text">Analyzing...</p>
            </div>
        </div>

        <!-- STEP 3: RESULTS & RECOMMENDATIONS -->
        <div class="wizard-step" id="step-3" style="display: none;">
            <div class="step-header">
                <h2>STEP 3: Results & AI Recommendations</h2>
                <p class="step-description">Here's how your track compares and what you can improve</p>
            </div>

            <div id="results-container" class="results-container">
                <!-- Results will be populated by JavaScript -->
                <div class="results-summary">
                    <h3><img src="/static/icons/analysis.svg" class="icon-svg medium" alt=""> Comparison Summary</h3>
                    <div id="comparison-summary"></div>
                </div>

                <div class="recommendations-section">
                    <h3><img src="/static/icons/recommendations.svg" class="icon-svg medium" alt=""> AI Recommendations (NOT WORKING YET)</h3>
                    <p class="recommendations-intro">Based on the analysis, here's what you can improve:</p>
                    <div id="ai-recommendations"></div>
                </div>
            </div>

            <div class="wizard-navigation">
                <button class="btn btn-secondary" id="start-over-btn">üîÑ Start Over</button>
                <button class="btn btn-primary" id="export-report-btn">üìÑ Export Report </button>
            </div>
        </div>

    </div>
    </div> <!-- End main-app-content -->

    <!-- Session Data (hidden) -->
    <div id="session-data" style="display: none;">
        <span id="session-id"></span>
        <span id="wizard-reference-type"></span>
        <span id="wizard-reference-ready">false</span>
    </div>

    <!-- Progress Modal -->
    <div id="progress-modal" class="progress-modal-overlay" style="display: none;">
        <div class="progress-modal-content">
            <div class="progress-modal-header">
                <div class="progress-spinner"></div>
                <h3 id="progress-modal-title">Processing Audio...</h3>
            </div>
            <div class="progress-modal-body">
                <div class="progress-bar-modal">
                    <div class="progress-fill-modal" id="progress-fill-modal"></div>
                </div>
                <p class="progress-message-modal" id="progress-message-modal">Initializing...</p>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3><img src="/static/icons/auth.svg" class="icon-svg small" alt=""> Login</h3>
            <div class="auth-form">
                <input type="email" id="login-email" placeholder="Email" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <p id="login-error" class="error-message"></p>
                <div class="modal-buttons">
                    <button id="login-confirm" class="btn btn-primary">LOGIN</button>
                    <button id="login-cancel" class="btn btn-secondary">CANCEL</button>
                </div>
                <p style="margin-top: 15px; font-size: 13px;">Don't have an account? <a href="#" id="go-to-register">Register here</a></p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3><img src="/static/icons/auth.svg" class="icon-svg small" alt=""> Register</h3>
            <div class="auth-form">
                <input type="email" id="register-email" placeholder="Email" required>
                <input type="password" id="register-password" placeholder="Password" required>
                <input type="password" id="register-password-confirm" placeholder="Confirm Password" required>
                <p id="register-error" class="error-message"></p>
                <div class="modal-buttons">
                    <button id="register-confirm" class="btn btn-primary">REGISTER</button>
                    <button id="register-cancel" class="btn btn-secondary">CANCEL</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save Preset Modal -->
    <div id="save-preset-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3><img src="/static/icons/save.svg" class="icon-svg medium" alt=""> Save Playlist as Preset</h3>
            <p>Enter a name for this playlist profile:</p>
            <input type="text" id="preset-name-input-wizard" placeholder="e.g., Top 40 Hits 2024" maxlength="50">
            <div class="modal-buttons">
                <button id="preset-save-confirm-wizard" class="btn btn-primary">SAVE</button>
                <button id="preset-save-cancel-wizard" class="btn btn-secondary">CANCEL</button>
            </div>
        </div>
    </div>

    <!-- Advanced Parameters Modal -->
    <div id="params-modal" class="modal" style="display: none;">
        <div class="modal-content large">
            <div class="modal-header">
                <h3><img src="/static/icons/analysis.svg" class="icon-svg medium" alt=""> Advanced Parameters</h3>
                <button id="close-params-modal" style="background:none;border:none;color:#888;font-size:24px;cursor:pointer;">‚úï</button>
            </div>
            <div class="modal-body-scroll">
                <div id="modal-params-container" class="params-grid-container">
                    <!-- Parameters will be moved here dynamically -->
                </div>
            </div>
            <div class="modal-buttons">
                <button id="confirm-params-btn" class="btn btn-primary">CONFIRM SELECTION</button>
            </div>
        </div>
    </div>

    <!-- Redeem Coupon Modal -->
    <div id="coupon-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>üéÅ Redeem Coupon Code</h3>
            <p style="color: #888; margin-bottom: 20px; font-size: 14px;">
                Enter your coupon code to add credits to your account
            </p>
            <input
                type="text"
                id="coupon-code-input"
                placeholder="Enter coupon code (e.g., BETA2024)"
                style="text-transform: uppercase; letter-spacing: 2px; font-family: monospace; font-size: 16px; text-align: center;"
                maxlength="50"
            >
            <p id="coupon-message" style="margin-top: 15px; display: none; padding: 10px; border-radius: 4px;"></p>
            <div class="modal-buttons" style="margin-top: 20px;">
                <button id="redeem-coupon-btn" class="btn btn-primary">REDEEM CODE</button>
                <button id="coupon-cancel-btn" class="btn btn-secondary">CANCEL</button>
            </div>
        </div>
    </div>

    <script src="/static/js/wizard.js?v=2.1"></script>
</body>
</html>
